"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4975],{4975:($,p,u)=>{u.r(p),u.d(p,{CombustivelPageModule:()=>E});var v=u(316),C=u(496),n=u(957),b=u(1379),m=u(9204),g=u(6443),o=u(7404),f=u(7125),h=u(4979),S=u(4747),F=u(9581);function j(s,c){if(1&s){const i=o.RV6();o.j41(0,"ion-accordion")(1,"ion-item",8)(2,"ion-label"),o.EFF(3),o.nI1(4,"number"),o.k0s(),o.j41(5,"ion-buttons",9)(6,"ion-button",5),o.bIt("click",function(){const r=o.eBV(i).$implicit,l=o.XpG();return o.Njj(l.editCombustivel(r))}),o.EFF(7," Editar "),o.k0s(),o.j41(8,"ion-button",10),o.bIt("click",function(){const r=o.eBV(i).$implicit,l=o.XpG();return o.Njj(l.deleteCombustivel(r.id))}),o.EFF(9," Deletar "),o.k0s()()(),o.j41(10,"ion-list",11)(11,"ion-item")(12,"ion-label")(13,"h2"),o.EFF(14),o.k0s(),o.j41(15,"p"),o.EFF(16),o.k0s(),o.j41(17,"p"),o.EFF(18),o.k0s(),o.j41(19,"p"),o.EFF(20),o.k0s(),o.j41(21,"p"),o.EFF(22),o.k0s(),o.j41(23,"p"),o.EFF(24),o.nI1(25,"number"),o.k0s(),o.j41(26,"p"),o.EFF(27),o.k0s(),o.j41(28,"p"),o.EFF(29),o.k0s(),o.j41(30,"p"),o.EFF(31),o.k0s(),o.j41(32,"p"),o.EFF(33),o.k0s()()()()()}if(2&s){const i=c.$implicit,e=o.XpG();o.R7$(3),o.E5c("",i.id," - ",i.nome," - R$:",o.i5U(4,13,i.preco,"1.2-2"),""),o.R7$(11),o.SpI("C\xf3digo: ",i.id,""),o.R7$(2),o.SpI("Nome: ",i.nome,""),o.R7$(2),o.SpI("Tipo produto: ",i.tipoproduto,""),o.R7$(2),o.SpI("Bombas: ",i.idbombas,""),o.R7$(2),o.SpI("Bicos: ",i.idbicos,""),o.R7$(2),o.SpI("Pre\xe7o: ",o.i5U(25,16,i.preco,"1.2-2"),""),o.R7$(3),o.SpI("NCM: ",i.ncm,""),o.R7$(2),o.SpI("ANP: ",i.anp,""),o.R7$(2),o.SpI("C\xf3digo de barras: ",i.codigobarras,""),o.R7$(2),o.SpI("Status: ",e.retornaStatusString(i.status),"")}}const P=[{path:"",component:(()=>{var s;class c{constructor(e,r,l,t,a,d){this.combustivelService=e,this.alertController=r,this.combustivelDataService=l,this.router=t,this.utilService=a,this.produtoService=d,this.combustiveis=[],this.newCombustivel={id:null,nome:"",idbicos:"",idbombas:"",preco:0,tipoproduto:"",status:!0,ehcombustivel:!0,ncm:"",anp:"",codigobarras:""}}ngOnInit(){}ionViewWillEnter(){this.loadCombustiveis()}loadCombustiveis(){var e=this;return(0,m.A)(function*(){e.combustiveis=yield e.combustivelService.getAllCombustiveisCombustivel(),e.combustiveis.sort((r,l)=>r.nome.localeCompare(l.nome))})()}addCombustivel(){var e=this;return(0,m.A)(function*(){if(e.newCombustivel.nome&&e.newCombustivel.preco){const r=yield e.combustivelService.addCombustivel(e.newCombustivel.id,e.newCombustivel.nome,e.newCombustivel.idbicos,e.newCombustivel.idbombas,e.newCombustivel.preco,e.newCombustivel.tipoproduto,e.newCombustivel.status,e.newCombustivel.ehcombustivel,e.newCombustivel.ncm,e.newCombustivel.anp,e.newCombustivel.codigobarras);e.newCombustivel.id=r,e.newCombustivel={id:null,nome:"",idbicos:"",idbombas:"",preco:0,tipoproduto:"",status:!0,ehcombustivel:!0,ncm:"",anp:"",codigobarras:""},e.loadCombustiveis(),yield(yield e.alertController.create({header:"Sucesso",message:`Combust\xedvel ${r} - ${e.newCombustivel.nome} salvo com sucesso!`,buttons:["OK"]})).present()}})()}deleteCombustivel(e){var r=this;return(0,m.A)(function*(){var t;yield(yield r.alertController.create({header:"Confirmar Exclus\xe3o",message:"Deseja realmente excluir este combust\xedvel?",buttons:[{text:"N\xe3o",role:"cancel"},{text:"Sim",handler:(t=(0,m.A)(function*(){yield r.combustivelService.deleteCombustivel(e),r.loadCombustiveis()}),function(){return t.apply(this,arguments)})}]})).present()})()}editCombustivel(e){this.combustivelDataService.setCombustivel(e),this.router.navigate(["/cadcombustivel"])}retornaStatusString(e){return e?"ATIVO":e?"":"INATIVO"}sincronizarTodosCombustiveis(){var e=this;return(0,m.A)(function*(){const r=[];for(const t of e.combustiveis){const a=e.retornaStatusString(t.status),d={codigoProduto:t.id.toString(),Descricao:t.nome,tipoProduto:t.tipoproduto,status:a,preco:e.utilService.verificarEConverterPreco(t.preco),ehCombustivel:t.ehcombustivel,ncm:t.ncm.toString(),anp:t.anp.toString(),codigoBarras:t.codigobarras.toString()};r.push(d)}const l={listaProdutos:r};console.log(`${JSON.stringify(l)}`);try{const t=yield e.produtoService.sincronizarProdutoBatch(l);return console.log(`${JSON.stringify(l)}`),console.log(`TraceID: ${t.trace_Id}`),console.log(`statusCode: ${t.statusCode}`),(t.statusCode=200)?(yield e.utilService.showAlert("Sucesso","Todos os combust\xedveis foram sincronizados."),!0):(yield e.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel sincronizar os combust\xedveis: ${t.errmsg}`),!1)}catch(t){console.error("Erro ao sincronizar os combust\xedveis:",t);let a="Erro desconhecido";return t instanceof g.yz&&(t.error&&"object"==typeof t.error&&"errmsg"in t.error?a=t.error.errmsg:t.message&&(a=t.message)),yield e.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel sincronizar os combust\xedveis: ${a}`),!1}})()}}return(s=c).\u0275fac=function(e){return new(e||s)(o.rXU(f.j),o.rXU(n.hG),o.rXU(h.j),o.rXU(b.Ix),o.rXU(S.a),o.rXU(F.N))},s.\u0275cmp=o.VBU({type:s,selectors:[["app-combustivel"]],decls:15,vars:2,consts:[[3,"translucent"],["slot","start"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[1,"fab-container"],[3,"click"],["name","sync"],["name","add"],["slot","header"],["slot","end"],["color","danger",3,"click"],["slot","content"]],template:function(e,r){1&e&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Combust\xedveis"),o.k0s()()(),o.j41(6,"ion-content")(7,"ion-accordion-group"),o.DNE(8,j,34,19,"ion-accordion",2),o.k0s(),o.j41(9,"ion-fab",3)(10,"div",4)(11,"ion-fab-button",5),o.bIt("click",function(){return r.sincronizarTodosCombustiveis()}),o.nrm(12,"ion-icon",6),o.k0s(),o.j41(13,"ion-fab-button",5),o.bIt("click",function(){return r.editCombustivel({id:null,nome:"",idbicos:"",idbombas:"",preco:0,tipoproduto:"",status:!0,ehcombustivel:!0,ncm:"",anp:"",codigobarras:""})}),o.nrm(14,"ion-icon",7),o.k0s()()()()),2&e&&(o.Y8G("translucent",!0),o.R7$(8),o.Y8G("ngForOf",r.combustiveis))},dependencies:[v.Sq,n.xk,n.YH,n.Jm,n.QW,n.W9,n.Q8,n.YW,n.eU,n.iq,n.uz,n.he,n.nf,n.MC,n.BC,n.ai,v.QX],styles:['@charset "UTF-8";.fab-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}']}),c})()}];let y=(()=>{var s;class c{}return(s=c).\u0275fac=function(e){return new(e||s)},s.\u0275mod=o.$C({type:s}),s.\u0275inj=o.G2t({imports:[b.iI.forChild(P),b.iI]}),c})(),E=(()=>{var s;class c{}return(s=c).\u0275fac=function(e){return new(e||s)},s.\u0275mod=o.$C({type:s}),s.\u0275inj=o.G2t({imports:[v.MD,C.YN,n.bv,y]}),c})()}}]);
//# sourceMappingURL=4975.8fe91553b9c60fc9.js.map