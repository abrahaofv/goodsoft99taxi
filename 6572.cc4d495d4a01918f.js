"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6572],{6572:(B,S,g)=>{g.r(S),g.d(S,{ConfiguracaoPageModule:()=>F});var C=g(316),v=g(496),p=g(957),h=g(1379),s=g(9204),o=g(7404),A=g(7132),I=g(4747),D=g(8278),y=g(6443),w=g(6196);let N=(()=>{var r;class l{constructor(e,t){this.http=e,this.configuracaoService=t}ExportarDatabaseFrontend(e){var t=this;return(0,s.A)(function*(){const c=(yield t.configuracaoService.getConfiguracaoUrlApi())+"ExportarDatabaseFrontend",d=new y.Lr({"Content-Type":"application/json"}),m=t.http.post(c,e,{headers:d});return yield(0,w._)(m)})()}}return(r=l).\u0275fac=function(e){return new(e||r)(o.KVO(y.Qq),o.KVO(A.v))},r.\u0275prov=o.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),l})(),O=(()=>{var r;class l{constructor(e,t){this.databaseService=e,this.exportarDatabaseFrontendService=t}exportDatabaseToJSON(){var e=this;return(0,s.A)(function*(){try{const t={combustiveis:yield e.databaseService.combustiveis.toArray(),bombas:yield e.databaseService.bombas.toArray(),descontos:yield e.databaseService.descontos.toArray(),descontoscombustiveis:yield e.databaseService.descontoscombustiveis.toArray(),descontotipospagamento:yield e.databaseService.descontotipospagamento.toArray(),configuracao:(yield e.databaseService.configuracao.toArray()).map(u=>({...u,login:"",loginsagaz:"",senha:"",senhasagaz:""}))},a=JSON.stringify(t,null,2),m=(new Blob([a],{type:"application/json"}),`GoodsoftDBapp99taxi${(new Date).toISOString().replace(/[:.-]/g,"")}.json`);console.log(`${JSON.stringify(t)}`),console.log(`${m}`),console.log(`${a}`);const i={JSONdb:a};try{return!!(yield e.exportarDatabaseFrontendService.ExportarDatabaseFrontend(i)).arquivoGerado}catch(u){return console.error("Erro ao enviar JSON para API:",u),!1}}catch(t){console.error("Erro ao exportar o banco de dados para JSON:",t)}return!1})()}importDatabaseFromJSON(e,t,a){var c=this;return(0,s.A)(function*(){try{const d=JSON.parse(e);if(t){yield c.databaseService.combustiveis.clear();for(const i of d.combustiveis)yield c.databaseService.addCombustivel(i.id,i.nome,i.idbicos,i.idbombas,parseFloat(i.preco),i.tipoproduto,i.status,i.ehcombustivel,i.ncm.toString(),i.anp.toString(),i.codigobarras.toString())}if(a){yield c.databaseService.bombas.clear();for(const i of d.bombas)yield c.databaseService.addBomba(i.idbomba,i.idbicos)}const m={};for(const i of d.descontos)if(!(yield c.databaseService.descontos.where("idpedidodidiglobal").equals(i.idpedidodidiglobal).first())){const b=yield c.databaseService.addDesconto(i.totalpreco,i.totaldesconto,new Date(i.datahora),i.numerorecibo,i.idpedidodidiglobal,i.codigodesconto,i.confirmado,i.totaldescontorecebido,i.cancelado,i.nomeatendente);m[i.id]=b}for(const i of d.descontoscombustiveis){const u=m[i.iddesconto];void 0!==u&&(yield c.databaseService.addDescontoCombustivel(u,i.idcombustivel,i.idbomba,parseInt(i.idbico),i.nome,i.preco,i.totallitros,i.totalprecocombustivel,i.totaldescontocombustivel,i.totaldescontorecebidocombustivel))}for(const i of d.descontotipospagamento){const u=m[i.iddesconto];void 0!==u&&(yield c.databaseService.addDescontoTiposPagamento(u,i.tipopagamento,i.valorpago))}for(const i of d.configuracao)yield c.databaseService.atualizaConfiguracaoParcial(i.id,i.urlapi,i.diretoriojson);return!0}catch(d){return console.error("Erro ao importar o banco de dados do JSON:",d),!1}})()}importCombustivelFromJSON(e){var t=this;return(0,s.A)(function*(){try{const a=JSON.parse(e);if(!["ETANOL","ETANOL_ADITIVADO","GASOLINA","GASOLINA_ADITIVADA","DIESEL","DIESEL_S500_ADITIVADO","DIESEL_ADITIVADO","DIESEL_S10_ADITIVADO","GASOLINA_PODIUM","GASOLINA_PREMIUM","GNV","ARLA32","QUEROSENE","GASOLINA_TROCA_OLEO","PONTUACAO","OUTRO"].includes(a.TiposProduto))throw new Error(`Tipo de Produto inv\xe1lido: ${a.TiposProduto}`);(yield t.databaseService.getCombustivelById(a.Codigo))&&(yield t.databaseService.deleteCombustivel(a.Codigo)),yield t.databaseService.addCombustivel(a.Codigo,a.Nome,a.Bico.toString(),a.Bomba.toString(),a.Preco,a.TiposProduto,!0,!0,a.NCM,a.ANP,a.CodigoBarras);const m=a.Bomba.toString().split(",").map(u=>u.trim()),i=a.Bico.toString().split(",").map(u=>u.trim());for(const u of m){const b=yield t.databaseService.getBombaById(parseInt(u));if(b){let _=b.idbicos.split(",").map(f=>f.trim());for(const f of i)_.includes(f)||_.push(f);yield t.databaseService.updateBomba(parseInt(u),_.join(","))}else yield t.databaseService.addBomba(parseInt(u),i.join(","))}return!0}catch(a){return console.error("Erro ao importar o combust\xedvel do JSON:",a),!1}})()}}return(r=l).\u0275fac=function(e){return new(e||r)(o.KVO(D.B),o.KVO(N))},r.\u0275prov=o.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),l})(),j=(()=>{var r;class l{constructor(e){this.dbUtilService=e}exportDatabaseToJSON(){var e=this;return(0,s.A)(function*(){return yield e.dbUtilService.exportDatabaseToJSON()})()}importDatabaseFromJSON(e,t,a){var c=this;return(0,s.A)(function*(){return yield c.dbUtilService.importDatabaseFromJSON(e,t,a)})()}retornaJSON(){return(0,s.A)(function*(){return'{\n      "combustiveis": [\n        {\n          "id": 1,\n          "nome": "GASOLINA",\n          "idbicos": "10,12",\n          "idbombas": "1",\n          "preco": "5.99",\n          "tipoproduto": "GASOLINA",\n          "status": true,\n          "ehcombustivel": true,\n          "ncm": 12345,\n          "anp": 12345,\n          "codigobarras": 123154\n        },\n        {\n          "id": 2,\n          "nome": "ETANOL",\n          "idbicos": "1",\n          "idbombas": "2",\n          "preco": "4.7851",\n          "tipoproduto": "ETANOL",\n          "status": true,\n          "ehcombustivel": true,\n          "ncm": 1234,\n          "anp": 1234,\n          "codigobarras": 1234\n        },\n        {\n          "id": 3,\n          "nome": "GASOLINA PODIUM",\n          "idbicos": "2",\n          "idbombas": "2",\n          "preco": "8.5127",\n          "tipoproduto": "GASOLINA_PODIUM",\n          "status": true,\n          "ehcombustivel": true,\n          "ncm": 12345,\n          "anp": 12345,\n          "codigobarras": 12345\n        },\n        {\n          "id": 4,\n          "nome": "GASOLINA PREMIUM",\n          "idbicos": "3",\n          "idbombas": "3",\n          "preco": "8.00",\n          "tipoproduto": "GASOLINA_PREMIUM",\n          "status": true,\n          "ehcombustivel": true,\n          "ncm": 1234,\n          "anp": 12354,\n          "codigobarras": 12345\n        }\n      ],\n      "bombas": [\n        {\n          "idbomba": 1,\n          "idbicos": "10,12"\n        },\n        {\n          "idbomba": 2,\n          "idbicos": "1,2"\n        },\n        {\n          "idbomba": 3,\n          "idbicos": "3"\n        }\n      ],\n      "descontos": [\n        {\n          "totalpreco": 23.95,\n          "totaldesconto": 23.95,\n          "datahora": "2024-08-01T00:02:48.521Z",\n          "numerorecibo": "123",\n          "idpedidodidiglobal": "13e70bf0-0cfa-93cf-957e-590afd1b9899",\n          "codigodesconto": "9MCN8",\n          "confirmado": false,\n          "totaldescontorecebido": 0,\n          "cancelado": false,\n          "nomeatendente": "Roberta Cristina",\n          "id": 1\n        },\n        {\n          "totalpreco": 124.47,\n          "totaldesconto": 114.08,\n          "datahora": "2024-08-06T22:02:18.317Z",\n          "numerorecibo": "7897",\n          "idpedidodidiglobal": "e870bba5-9029-9b0c-af15-a7c469915b21",\n          "codigodesconto": "9MCN8",\n          "confirmado": false,\n          "totaldescontorecebido": 0,\n          "cancelado": false,\n          "nomeatendente": "RONALD SOUZA",\n          "id": 2\n        },\n        {\n          "totalpreco": 101.13,\n          "totaldesconto": 93.74,\n          "datahora": "2024-08-06T22:27:58.025Z",\n          "numerorecibo": "79815",\n          "idpedidodidiglobal": "2632c3ac-76b8-99de-9efb-3d153c2d3564",\n          "codigodesconto": "9MCN8",\n          "confirmado": true,\n          "totaldescontorecebido": 0,\n          "cancelado": false,\n          "nomeatendente": "ANDR\xc9 DANTAS",\n          "id": 3\n        },\n        {\n          "totalpreco": 299.5,\n          "totaldesconto": 279.5,\n          "datahora": "2024-08-06T23:02:54.606Z",\n          "numerorecibo": "789456",\n          "idpedidodidiglobal": "7f31542e-b228-9829-b8fc-9c69255f78fe",\n          "codigodesconto": "9MCN8",\n          "confirmado": true,\n          "totaldescontorecebido": 20,\n          "cancelado": true,\n          "nomeatendente": "Ricardo Silva",\n          "id": 4\n        },\n        {\n          "totalpreco": 80,\n          "totaldesconto": 75,\n          "datahora": "2024-08-06T23:17:30.308Z",\n          "numerorecibo": "12345",\n          "idpedidodidiglobal": "1bf1352b-ecf6-9bbd-a81f-6ce4f382c3a5",\n          "codigodesconto": "9MCN8",\n          "confirmado": true,\n          "totaldescontorecebido": 0,\n          "cancelado": false,\n          "nomeatendente": "Ricardo Silva",\n          "id": 5\n        },\n        {\n          "totalpreco": 160,\n          "totaldesconto": 150,\n          "datahora": "2024-08-06T23:55:51.230Z",\n          "numerorecibo": "12367",\n          "idpedidodidiglobal": "081d0980-5dd8-990d-a4ed-ba59560e2053",\n          "codigodesconto": "9MCN8",\n          "confirmado": true,\n          "totaldescontorecebido": 0,\n          "cancelado": false,\n          "nomeatendente": "RONALDINHO GAUCHO",\n          "id": 6\n        }\n      ],\n      "descontoscombustiveis": [\n        {\n          "iddesconto": 1,\n          "idcombustivel": 2,\n          "idbomba": 2,\n          "idbico": "1",\n          "nome": "ETANOL",\n          "preco": 4.79,\n          "totallitros": 5,\n          "totalprecocombustivel": 23.95,\n          "totaldescontocombustivel": 23.95,\n          "totaldescontorecebidocombustivel": 0,\n          "id": 1\n        },\n        {\n          "iddesconto": 2,\n          "idcombustivel": 1,\n          "idbomba": 1,\n          "idbico": "12",\n          "nome": "GASOLINA",\n          "preco": 5.99,\n          "totallitros": 20.78,\n          "totalprecocombustivel": 124.47,\n          "totaldescontocombustivel": 114.08,\n          "totaldescontorecebidocombustivel": 10.39,\n          "id": 2\n        },\n        {\n          "iddesconto": 3,\n          "idcombustivel": 3,\n          "idbomba": 2,\n          "idbico": "2",\n          "nome": "GASOLINA PODIUM",\n          "preco": 8.51,\n          "totallitros": 5,\n          "totalprecocombustivel": 42.55,\n          "totaldescontocombustivel": 40.05,\n          "totaldescontorecebidocombustivel": 2.5,\n          "id": 3\n        },\n        {\n          "iddesconto": 3,\n          "idcombustivel": 1,\n          "idbomba": 1,\n          "idbico": "10",\n          "nome": "GASOLINA",\n          "preco": 5.99,\n          "totallitros": 9.78,\n          "totalprecocombustivel": 58.58,\n          "totaldescontocombustivel": 53.69,\n          "totaldescontorecebidocombustivel": 4.89,\n          "id": 4\n        },\n        {\n          "iddesconto": 4,\n          "idcombustivel": 1,\n          "idbomba": 1,\n          "idbico": "12",\n          "nome": "GASOLINA",\n          "preco": 5.99,\n          "totallitros": 50,\n          "totalprecocombustivel": 299.5,\n          "totaldescontocombustivel": 279.5,\n          "totaldescontorecebidocombustivel": 20,\n          "id": 5\n        },\n        {\n          "iddesconto": 5,\n          "idcombustivel": 4,\n          "idbomba": 3,\n          "idbico": "3",\n          "nome": "GASOLINA PREMIUM",\n          "preco": 8,\n          "totallitros": 10,\n          "totalprecocombustivel": 80,\n          "totaldescontocombustivel": 75,\n          "totaldescontorecebidocombustivel": 5,\n          "id": 6\n        },\n        {\n          "iddesconto": 6,\n          "idcombustivel": 4,\n          "idbomba": 3,\n          "idbico": "3",\n          "nome": "GASOLINA PREMIUM",\n          "preco": 8,\n          "totallitros": 20,\n          "totalprecocombustivel": 160,\n          "totaldescontocombustivel": 150,\n          "totaldescontorecebidocombustivel": 10,\n          "id": 7\n        }\n      ],\n      "descontotipospagamento": [\n        {\n          "iddesconto": 3,\n          "tipopagamento": "Dinheiro",\n          "valorpago": 93.74,\n          "id": 1\n        },\n        {\n          "iddesconto": 4,\n          "tipopagamento": "Dinheiro",\n          "valorpago": 279.5,\n          "id": 2\n        },\n        {\n          "iddesconto": 5,\n          "tipopagamento": "Pix",\n          "valorpago": 75,\n          "id": 3\n        },\n        {\n          "iddesconto": 6,\n          "tipopagamento": "Pix",\n          "valorpago": 100,\n          "id": 4\n        },\n        {\n          "iddesconto": 6,\n          "tipopagamento": "Dinheiro",\n          "valorpago": 50,\n          "id": 5\n        }\n      ],\n      "configuracao": [\n        {\n          "id": 1,\n          "login": "",\n          "senha": "",\n          "urlapi": "http://localhost:5000/api/GasStation/",\n          "loginsagaz": "",\n          "senhasagaz": "",\n          "diretoriojson": ""\n        }\n      ]\n    }'})()}}return(r=l).\u0275fac=function(e){return new(e||r)(o.KVO(O))},r.\u0275prov=o.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),l})();function E(r,l){if(1&r){const n=o.RV6();o.j41(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),o.EFF(4,"Login de Configura\xe7\xe3o"),o.k0s()(),o.j41(5,"ion-card-content")(6,"ion-item")(7,"ion-label",4),o.EFF(8,"Usu\xe1rio"),o.k0s(),o.j41(9,"ion-input",5),o.mxI("ngModelChange",function(t){o.eBV(n);const a=o.XpG();return o.DH7(a.username,t)||(a.username=t),o.Njj(t)}),o.k0s()(),o.j41(10,"ion-item")(11,"ion-label",4),o.EFF(12,"Senha"),o.k0s(),o.j41(13,"ion-input",6),o.mxI("ngModelChange",function(t){o.eBV(n);const a=o.XpG();return o.DH7(a.password,t)||(a.password=t),o.Njj(t)}),o.j41(14,"ion-icon",7),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.togglePassword("loginpassword"))}),o.k0s()()(),o.j41(15,"ion-button",8),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.login())}),o.EFF(16,"Entrar"),o.k0s()()()()}if(2&r){const n=o.XpG();o.R7$(9),o.R50("ngModel",n.username),o.R7$(4),o.R50("ngModel",n.password),o.Y8G("type",n.passwordType),o.R7$(),o.Y8G("name","password"===n.passwordType?"eye-off":"eye")}}function T(r,l){if(1&r){const n=o.RV6();o.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-item")(3,"ion-label",9),o.EFF(4,"Login administrativo"),o.k0s(),o.j41(5,"ion-input",10),o.mxI("ngModelChange",function(t){o.eBV(n);const a=o.XpG();return o.DH7(a.newConfiguracao.login,t)||(a.newConfiguracao.login=t),o.Njj(t)}),o.k0s()(),o.j41(6,"ion-item")(7,"ion-label",9),o.EFF(8,"URL da API"),o.k0s(),o.j41(9,"ion-input",10),o.mxI("ngModelChange",function(t){o.eBV(n);const a=o.XpG();return o.DH7(a.newConfiguracao.urlapi,t)||(a.newConfiguracao.urlapi=t),o.Njj(t)}),o.k0s()(),o.j41(10,"ion-button",8),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.atualizarConfiguracoes())}),o.EFF(11,"Salvar configura\xe7\xf5es"),o.k0s()()(),o.j41(12,"ion-card")(13,"ion-card-header")(14,"ion-card-title"),o.EFF(15,"Alterar Senha"),o.k0s()(),o.j41(16,"ion-card-content")(17,"ion-item")(18,"ion-label",4),o.EFF(19,"Nova Senha"),o.k0s(),o.j41(20,"ion-input",6),o.mxI("ngModelChange",function(t){o.eBV(n);const a=o.XpG();return o.DH7(a.password,t)||(a.password=t),o.Njj(t)}),o.j41(21,"ion-icon",7),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.togglePassword("new"))}),o.k0s()()(),o.j41(22,"ion-item")(23,"ion-label",4),o.EFF(24,"Confirmar Nova Senha"),o.k0s(),o.j41(25,"ion-input",6),o.mxI("ngModelChange",function(t){o.eBV(n);const a=o.XpG();return o.DH7(a.passwordConfirm,t)||(a.passwordConfirm=t),o.Njj(t)}),o.j41(26,"ion-icon",7),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.togglePassword("confirm"))}),o.k0s()()(),o.j41(27,"ion-button",8),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.atualizarSenha())}),o.EFF(28,"Alterar Senha"),o.k0s()()(),o.j41(29,"ion-card")(30,"ion-card-header")(31,"ion-card-title"),o.EFF(32,"Banco de Dados"),o.k0s()(),o.j41(33,"ion-card-content")(34,"ion-button",8),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.exportDatabase())}),o.EFF(35,"Exportar Banco de Dados"),o.k0s(),o.j41(36,"ion-button",8),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.importDatabase())}),o.EFF(37,"Importar Banco de Dados"),o.k0s(),o.j41(38,"ion-button",11),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.resetDatabase())}),o.EFF(39,"Limpar Banco de Dados"),o.k0s()()(),o.j41(40,"ion-button",12),o.bIt("click",function(){o.eBV(n);const t=o.XpG();return o.Njj(t.logout())}),o.EFF(41,"Sair das configura\xe7\xf5es"),o.k0s()}if(2&r){const n=o.XpG();o.R7$(5),o.R50("ngModel",n.newConfiguracao.login),o.R7$(4),o.R50("ngModel",n.newConfiguracao.urlapi),o.R7$(11),o.R50("ngModel",n.password),o.Y8G("type",n.passwordTypeNew),o.R7$(),o.Y8G("name","password"===n.passwordTypeNew?"eye-off":"eye"),o.R7$(4),o.R50("ngModel",n.passwordConfirm),o.Y8G("type",n.passwordTypeConfirm),o.R7$(),o.Y8G("name","password"===n.passwordTypeConfirm?"eye-off":"eye")}}const x=[{path:"",component:(()=>{var r;class l{constructor(e,t,a,c,d){this.alertController=e,this.configuracaoService=t,this.utilService=a,this.router=c,this.databaseToJSONService=d,this.newConfiguracao={id:1,login:"",senha:"",urlapi:"",loginsagaz:"",senhasagaz:"",diretoriojson:""},this.id=1,this.passwordType="password",this.passwordTypeNew="password",this.passwordTypeConfirm="password",this.isAuthenticated=!1,this.importDB=!1,this.importBombas=!1,this.importCombustiveis=!1}ngOnInit(){const e=localStorage.getItem("isAuthenticated");this.isAuthenticated=!(!e||"true"!==e),this.realizaConfiguracaoInicial()}ionViewWillLeave(){this.logout()}ngOnDestroy(){}loadConfiguracoes(){var e=this;return(0,s.A)(function*(){const t=yield e.configuracaoService.getConfiguracaoById(1);t&&(e.newConfiguracao=t)})()}realizaConfiguracaoInicial(){var e=this;return(0,s.A)(function*(){const t=yield e.configuracaoService.configuracaoInicial();t&&(yield e.utilService.showAlert("Configura\xe7\xe3o",t),e.loadConfiguracoes())})()}login(){var e=this;return(0,s.A)(function*(){if("goodsoft"==e.username&&"G2024soft"==e.password)return e.configuracaoService.deleteConfiguracao(1),e.username="",e.password="",void e.realizaConfiguracaoInicial();(yield e.configuracaoService.autenticar(e.id,e.username,e.password))?(e.isAuthenticated=!0,localStorage.setItem("isAuthenticated","true"),e.username="",e.password="",e.passwordConfirm="",e.loadConfiguracoes()):yield e.utilService.showAlert("Erro","Login ou senha incorretos.")})()}atualizarSenha(){var e=this;return(0,s.A)(function*(){e.passwordConfirm==e.password?(e.newConfiguracao.senha=e.password,e.salvarConfiguracao().then((0,s.A)(function*(){yield e.utilService.showAlert("Sucesso","Senha atualizada com sucesso."),e.logout()})).catch(function(){var t=(0,s.A)(function*(a){yield e.utilService.showAlert("Erro","Falha ao atualizar senha. Tente novamente mais tarde."),console.error("Erro ao salvar senha:",a),e.logout()});return function(a){return t.apply(this,arguments)}}())):yield e.utilService.showAlert("Erro","As senhas informadas n\xe3o batem.")})()}atualizarConfiguracoes(){var e=this;return(0,s.A)(function*(){e.atualizaConfiguracaoParcial().then((0,s.A)(function*(){yield e.utilService.showAlert("Sucesso","Configura\xe7\xe3o atualizada com sucesso."),e.logout()})).catch(function(){var t=(0,s.A)(function*(a){yield e.utilService.showAlert("Erro","Falha ao atualizar configura\xe7\xf5es. Tente novamente mais tarde."),console.error("Erro ao salvar configura\xe7\xe3o:",a),e.logout()});return function(a){return t.apply(this,arguments)}}())})()}salvarConfiguracao(){var e=this;return(0,s.A)(function*(){return yield e.configuracaoService.salvaConfiguracao(e.newConfiguracao.id,e.newConfiguracao.login,e.newConfiguracao.senha,e.newConfiguracao.urlapi,e.newConfiguracao.loginsagaz,e.newConfiguracao.senhasagaz,e.newConfiguracao.diretoriojson)})()}atualizaConfiguracaoParcial(){var e=this;return(0,s.A)(function*(){return yield e.configuracaoService.atualizaConfiguracaoParcial(e.newConfiguracao.id,e.newConfiguracao.urlapi,e.newConfiguracao.diretoriojson)})()}togglePassword(e){"new"===e?this.passwordTypeNew="password"===this.passwordTypeNew?"text":"password":"confirm"===e?this.passwordTypeConfirm="password"===this.passwordTypeConfirm?"text":"password":"loginpassword"===e&&(this.passwordType="password"===this.passwordType?"text":"password")}resetDatabase(){var e=this;return(0,s.A)(function*(){yield(yield e.alertController.create({header:"Confirmar Reset",message:"Deseja realmente resetar o Banco de Dados? Isso ir\xe1 apagar todas as informa\xe7\xf5es de descontos, bombas, combust\xedveis e configura\xe7\xf5es.",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Reset cancelado")}},{text:"Confirmar",handler:()=>{e.configuracaoService.resetDatabase(),e.logout()}}]})).present()})()}logout(){var e=this;return(0,s.A)(function*(){localStorage.removeItem("isAuthenticated"),e.isAuthenticated=!1,window.location.reload(),e.router.navigate(["/configuracao"])})()}exportDatabase(){var e=this;return(0,s.A)(function*(){try{if(!(yield e.databaseToJSONService.exportDatabaseToJSON()))return void(yield e.utilService.showAlert("Erro","Erro ao exportar Banco de Dados."));yield e.utilService.showAlert("Sucesso","Banco de Dados exportado com sucesso.")}catch(t){yield e.utilService.showAlert("Erro",`Erro ao exportar Banco de Dados: ${t}.`)}})()}importDatabase(){var e=this;return(0,s.A)(function*(){try{if(yield e.perguntaImportarDB(),!e.importDB)return;const t=yield e.databaseToJSONService.retornaJSON();console.log("In\xedcio importa\xe7\xe3o do Banco de Dados"),(yield e.databaseToJSONService.importDatabaseFromJSON(t,e.importCombustiveis,e.importBombas))&&e.utilService.showAlert("Sucesso","Importa\xe7\xe3o do Bando de Dados realizada com sucesso.")}catch(t){e.utilService.showAlert("Erro",`Ocorreu um erro na Importa\xe7\xe3o do Bando de Dados: ${t}`)}})()}perguntaImportarDB(){var e=this;return(0,s.A)(function*(){return new Promise(function(){var t=(0,s.A)(function*(a){var d;yield(yield e.alertController.create({header:"Importar Banco de Dados",message:"Deseja importar o backup do banco de dados (nome - data arquivo)?",buttons:[{text:"N\xe3o",role:"cancel",handler:()=>{e.importDB=!1,a()}},{text:"Sim",handler:(d=(0,s.A)(function*(){e.importDB=!0,e.importBombas=yield e.perguntaImportaTabela("Bombas"),e.importCombustiveis=yield e.perguntaImportaTabela("Combust\xedveis"),a()}),function(){return d.apply(this,arguments)})}]})).present()});return function(a){return t.apply(this,arguments)}}())})()}perguntaImportaTabela(e){var t=this;return(0,s.A)(function*(){return new Promise(function(){var a=(0,s.A)(function*(c){const d=e.includes("Bombas")?"as":"os";yield(yield t.alertController.create({header:`Importar ${e}`,message:`ATEN\xc7\xc3O!!! Deseja importar ${d} ${e}? isto ir\xe1 apagar tod${d} ${e} atuais e ir\xe1 cadastrar ${d} ${e} da importa\xe7\xe3o.`,buttons:[{text:"N\xe3o",role:"cancel",handler:()=>{c(!1)}},{text:"Sim",handler:()=>{c(!0)}}]})).present()});return function(c){return a.apply(this,arguments)}}())})()}}return(r=l).\u0275fac=function(e){return new(e||r)(o.rXU(p.hG),o.rXU(A.v),o.rXU(I.a),o.rXU(h.Ix),o.rXU(j))},r.\u0275cmp=o.VBU({type:r,selectors:[["app-configuracao"]],decls:10,vars:3,consts:[["configContent",""],[3,"translucent"],["slot","start"],[4,"ngIf","ngIfElse"],["position","floating"],["type","text",3,"ngModelChange","ngModel"],["clearInput","",3,"ngModelChange","ngModel","type"],["slot","end",3,"click","name"],["expand","block",3,"click"],["position","stacked"],[3,"ngModelChange","ngModel"],["expand","block","color","danger",3,"click"],["expand","block","color","secondary",3,"click"]],template:function(e,t){if(1&e&&(o.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Configura\xe7\xe3o"),o.k0s()()(),o.j41(6,"ion-content"),o.DNE(7,E,17,4,"div",3)(8,T,42,8,"ng-template",null,0,o.C5r),o.k0s()),2&e){const a=o.sdS(9);o.Y8G("translucent",!0),o.R7$(7),o.Y8G("ngIf",!t.isAuthenticated)("ngIfElse",a)}},dependencies:[C.bT,v.BC,v.vS,p.Jm,p.QW,p.b_,p.I9,p.ME,p.tN,p.W9,p.eU,p.iq,p.$w,p.uz,p.he,p.MC,p.BC,p.ai,p.Gw],styles:[".small-checkbox[_ngcontent-%COMP%]{--ion-item-padding-start: 0;--ion-item-padding-end: 0;font-size:.8em}"]}),l})()}];let P=(()=>{var r;class l{}return(r=l).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.$C({type:r}),r.\u0275inj=o.G2t({imports:[h.iI.forChild(x),h.iI]}),l})(),F=(()=>{var r;class l{}return(r=l).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.$C({type:r}),r.\u0275inj=o.G2t({imports:[C.MD,v.YN,p.bv,P]}),l})()}}]);
//# sourceMappingURL=6572.cc4d495d4a01918f.js.map