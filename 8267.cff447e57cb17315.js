"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8267],{8267:(O,D,u)=>{u.r(D),u.d(D,{CaddescontoPageModule:()=>G});var b=u(316),v=u(496),l=u(957),f=u(1379),d=u(9204),g=u(6443),o=u(7404),h=u(5841),C=u(9153),P=u(6196),_=u(7132);let S=(()=>{var a;class m{constructor(t,e){this.http=t,this.configuracaoService=e}validarDesconto(t){var e=this;return(0,d.A)(function*(){const i=(yield e.configuracaoService.getConfiguracaoUrlApi())+"ValidarCupomDesconto",s=new g.Lr({"Content-Type":"application/json"}),r=e.http.post(i,t,{headers:s});return yield(0,P._)(r)})()}}return(a=m).\u0275fac=function(t){return new(t||a)(o.KVO(g.Qq),o.KVO(_.v))},a.\u0275prov=o.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),m})();var A=u(8685),y=u(9581),E=u(4747),T=u(7127),F=u(7125);const I=["btDeletarProduto"],j=["btEditarProduto"];function k(a,m){if(1&a&&(o.j41(0,"ion-select-option",25),o.EFF(1),o.k0s()),2&a){const c=m.$implicit;o.Y8G("value",c),o.R7$(),o.JRh(c)}}function $(a,m){if(1&a){const c=o.RV6();o.j41(0,"ion-accordion")(1,"ion-item",16)(2,"ion-label"),o.EFF(3),o.k0s(),o.j41(4,"ion-buttons",17)(5,"ion-button",18,0),o.bIt("click",function(){const e=o.eBV(c).index,n=o.XpG();return o.Njj(n.editDescontosTiposPagamento(e))}),o.EFF(7,"Editar"),o.k0s(),o.j41(8,"ion-button",19,1),o.bIt("click",function(){const e=o.eBV(c).index,n=o.XpG();return o.Njj(n.deleteDescontosTiposPagamento(e))}),o.EFF(10,"Deletar"),o.k0s()()(),o.j41(11,"ion-list",20)(12,"ion-item")(13,"ion-label",5),o.EFF(14,"Tipo de Pagamento"),o.k0s(),o.j41(15,"ion-select",21),o.mxI("ngModelChange",function(e){const n=o.eBV(c).$implicit;return o.DH7(n.tipopagamento,e)||(n.tipopagamento=e),o.Njj(e)}),o.DNE(16,k,2,2,"ion-select-option",22),o.k0s(),o.j41(17,"ion-label",5),o.EFF(18,"Valor Pago"),o.k0s(),o.j41(19,"ion-input",23),o.mxI("ngModelChange",function(e){const n=o.eBV(c).$implicit;return o.DH7(n.valorpago,e)||(n.valorpago=e),o.Njj(e)}),o.bIt("ngModelChange",function(e){o.eBV(c);const n=o.XpG();return o.Njj(n.formatValue(e))}),o.k0s(),o.j41(20,"ion-buttons",17)(21,"ion-button",24),o.bIt("click",function(){const e=o.eBV(c).$implicit,n=o.XpG();return o.Njj(n.sugerirValorTotalAPagarDescontosTiposPagamento(e))}),o.EFF(22,"Preencher Valor Total a Pagar"),o.k0s()()()()()}if(2&a){const c=m.$implicit,t=o.XpG();o.R7$(3),o.Lme(" Tipo de Pagamento: ",c.tipopagamento,", Valor Pago: ",c.valorpago," "),o.R7$(12),o.R50("ngModel",c.tipopagamento),o.R7$(),o.Y8G("ngForOf",t.pagamentos),o.R7$(3),o.R50("ngModel",c.valorpago)}}function N(a,m){if(1&a){const c=o.RV6();o.j41(0,"ion-accordion")(1,"ion-item",16)(2,"ion-label"),o.EFF(3),o.k0s(),o.j41(4,"ion-buttons",17)(5,"ion-button",18,0),o.bIt("click",function(){const e=o.eBV(c).index,n=o.XpG();return o.Njj(n.editDescontosCombustiveis(e))}),o.EFF(7,"Editar"),o.k0s(),o.j41(8,"ion-button",19,1),o.bIt("click",function(){const e=o.eBV(c).index,n=o.XpG();return o.Njj(n.deleteDescontosCombustiveis(e))}),o.EFF(10,"Deletar"),o.k0s()()(),o.j41(11,"ion-list",20)(12,"ion-item")(13,"ion-label")(14,"p"),o.EFF(15),o.k0s(),o.j41(16,"p"),o.EFF(17),o.nI1(18,"number"),o.k0s(),o.j41(19,"p"),o.EFF(20),o.nI1(21,"number"),o.k0s(),o.j41(22,"p"),o.EFF(23),o.nI1(24,"number"),o.k0s(),o.j41(25,"p",26),o.EFF(26),o.nI1(27,"number"),o.k0s()()()()()}if(2&a){const c=m.$implicit;o.R7$(3),o.E5c(" Bomba: ",c.idbomba,", Bico: ",c.idbico,", Combust\xedvel: ",c.nome," "),o.R7$(12),o.SpI("Pre\xe7o: R$",c.preco,""),o.R7$(2),o.SpI("Total de litros abastecidos: ",o.i5U(18,8,c.totallitros,"1.2-2"),""),o.R7$(3),o.SpI("Total sem desconto: R$",o.i5U(21,11,c.totalprecocombustivel,"1.2-2"),""),o.R7$(3),o.SpI("Total de desconto recebido: R$",o.i5U(24,14,c.totaldescontorecebidocombustivel,"1.2-2"),""),o.R7$(3),o.SpI("Total com desconto: R$",o.i5U(27,17,c.totaldescontocombustivel,"1.2-2"),"")}}const R=[{path:"",component:(()=>{var a;class m{constructor(t,e,n,i,s,r,p,V,B,U){this.descontoService=t,this.descontoDataService=e,this.alertController=n,this.cupomDescontoService=i,this.pedidoService=s,this.produtoService=r,this.router=p,this.utilService=V,this.gerarDadosRetornoIntegracaoService=B,this.combustivelService=U,this.desconto={totalpreco:0,totaldesconto:0,datahora:new Date,numerorecibo:null,idpedidodidiglobal:"",codigodesconto:"",confirmado:!1,totaldescontorecebido:0,cancelado:!1,nomeatendente:""},this.descontosTiposPagamento=[],this.descontosCombustiveis=[],this.pagamentos=["Pix","Dinheiro","Cart\xe3o de d\xe9bito","Cart\xe3o de cr\xe9dito","Carteiras digitais","Cheque"],this.isNovoDesconto=!0,this.isNovoDescontoCombustivel=!0,this.isNovoDescontoTiposPagamento=!0,this.isValid=!1}ngOnInit(){this.loadDesconto(),this.desabilitaValidarDesconto(!1),this.desabilitaAdicionarProduto(!1),this.desabilitaCancelarDesconto(!0),this.desabilitaGerarDesconto(!0),this.desabilitaAdicionarPagamento(!0)}ngAfterViewInit(){this.desabilitaEditarDeletarProduto(!0)}ionViewWillEnter(){this.loadDesconto(),this.updateTotals()}ionViewWillLeave(){this.descontoDataService.setDesconto(this.desconto)}ngOnDestroy(){this.descontoDataService.setDesconto(this.desconto)}loadDesconto(){var t=this;return(0,d.A)(function*(){const e=t.descontoDataService.getDesconto();e?(t.desconto=e,t.isNovoDesconto=!t.desconto.id,t.isNovoDescontoCombustivel=t.isNovoDesconto):(t.isNovoDesconto=!0,t.isNovoDescontoCombustivel=!0,t.desconto.nomeatendente=t.getNomeAtendenteFromLocalStorage()),t.descontosCombustiveis=t.descontoDataService.getDescontosCombustiveis(),t.descontosTiposPagamento=t.descontoDataService.getDescontoTiposPagamento(),t.isNovoDescontoTiposPagamento=t.descontosTiposPagamento.length<=0,t.updateTotals()})()}getNomeAtendenteFromLocalStorage(){return localStorage.getItem("nomeatendente")||""}saveNomeAtendenteToLocalStorage(t){localStorage.setItem("nomeatendente",t)}addDescontosCombustiveis(){var t=this;return(0,d.A)(function*(){t.descontoDataService.clearCurrentDescontoCombustivel(),t.router.navigate(["/caddescontoscombustiveis"])})()}editDescontosCombustiveis(t){var e=this;return(0,d.A)(function*(){e.descontoDataService.setCurrentDescontoCombustivel(e.descontosCombustiveis[t],t),e.router.navigate(["/caddescontoscombustiveis"])})()}deleteDescontosCombustiveis(t){var e=this;return(0,d.A)(function*(){e.descontosCombustiveis.splice(t,1),e.updateTotals()})()}updateTotals(){this.desconto.totalpreco=parseFloat(this.descontosCombustiveis.reduce((t,e)=>t+e.totalprecocombustivel,0).toFixed(2)),this.desconto.totaldesconto=parseFloat(this.descontosCombustiveis.reduce((t,e)=>t+e.totaldescontocombustivel,0).toFixed(2)),this.desconto.totaldescontorecebido=parseFloat(this.descontosCombustiveis.reduce((t,e)=>t+e.totaldescontorecebidocombustivel,0).toFixed(2))}validarDesconto(){var t=this;return(0,d.A)(function*(){return t.desconto.codigodesconto?0===t.descontosCombustiveis.length?(yield t.utilService.showAlert("Erro","Adicione pelo menos um item ao desconto."),!1):!!(yield t.validaDescontoAPI())&&(t.desabilitaAdicionarProduto(!0),t.desabilitaValidarDesconto(!0),t.desabilitaGerarDesconto(!1),t.desabilitaAdicionarPagamento(!1),t.desabilitaEditarDeletarProduto(!0),t.isNovoDesconto&&(yield t.sincronizarCombustivel()),yield t.saveDesconto(!1),yield t.utilService.showAlert("Sucesso","Desconto validado com sucesso."),!0):(yield t.utilService.showAlert("Erro","C\xf3digo do Desconto obrigat\xf3rio."),!1)})()}sincronizarCombustivel(){var t=this;return(0,d.A)(function*(){for(const n of t.descontosCombustiveis){const i=yield t.combustivelService.getCombustivelById(n.idcombustivel),s={codigoProduto:i.id.toString(),Descricao:i.nome,tipoProduto:i.tipoproduto,status:"ATIVO",preco:t.utilService.verificarEConverterPreco(i.preco),ehCombustivel:i.ehcombustivel,ncm:i.ncm.toString(),anp:i.anp.toString(),codigoBarras:i.codigobarras.toString()};try{const r=yield t.produtoService.sincronizarProdutoSingle(s);console.log(`${JSON.stringify(s)}`),console.log(`TraceID sincronizarCombustivel: ${r.trace_Id}`),console.log(`statusCode: ${r.statusCode}`),200!=r.statusCode&&(yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel sincronizar o combust\xedvel: ${r.errmsg}`))}catch(r){console.error("Erro ao sincronizar combust\xedvel:",r);let p="Erro desconhecido";r instanceof g.yz&&(r.error&&"object"==typeof r.error&&"errmsg"in r.error?p=r.error.errmsg:r.message&&(p=r.message)),yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel sincronizar o combust\xedvel: ${p}`)}}})()}validaPagamentos(){var t=this;return(0,d.A)(function*(){console.log("Entrou validaPagamentos");const e=t.descontosTiposPagamento.reduce((n,i)=>n+i.valorpago,0);if(e!==t.desconto.totaldesconto){const n=e<t.desconto.totaldesconto?`O valor total pago(${e}) \xe9 menor que o total do desconto(${t.desconto.totaldesconto}).`:`O valor total pago(${e}) \xe9 maior que o total do desconto(${t.desconto.totaldesconto}).`;return yield yield t.utilService.showAlert("Erro",n),!1}return!0})()}saveDesconto(t=!0){var e=this;return(0,d.A)(function*(){if(console.log(`saveDesconto - idpedidodidiglobal: ${e.desconto.idpedidodidiglobal}`),console.log(`saveDesconto - numerorecibo: ${e.desconto.numerorecibo}`),console.log(`saveDesconto - cancelado: ${e.desconto.cancelado}`),!e.desconto.numerorecibo&&!e.isNovoDesconto)return void(yield e.utilService.showAlert("Erro","Obrigat\xf3rio informar o recibo para gera\xe7\xe3o do desconto."));if(e.desconto.datahora=new Date,e.saveNomeAtendenteToLocalStorage(e.desconto.nomeatendente),e.updateTotals(),t&&e.desconto.idpedidodidiglobal&&e.desconto.numerorecibo&&!e.desconto.cancelado){if(!(yield e.validaPagamentos()))return;const s=yield e.ConfirmaDescontoAPI();if(!s)return;if(e.descontosTiposPagamento.length>0){for(const r of e.descontosTiposPagamento)r.iddesconto=e.desconto.id,r.id=e.isNovoDescontoTiposPagamento?yield e.descontoService.addDescontoTiposPagamento(r):yield e.descontoService.updateDescontoTiposPagamento(r);e.isNovoDescontoTiposPagamento&&(e.isNovoDescontoTiposPagamento=!1)}if(s&&!(yield e.gerarDadosRetornoIntegracao()))return}let n;console.log(`saveDesconto - confirmado: ${e.desconto.confirmado}`),e.isNovoDesconto?(n=yield e.descontoService.addDesconto(e.desconto.totalpreco,e.desconto.totaldesconto,e.desconto.datahora,e.desconto.numerorecibo,e.desconto.idpedidodidiglobal,e.desconto.codigodesconto,e.desconto.confirmado,e.desconto.totaldescontorecebido,e.desconto.cancelado,e.desconto.nomeatendente),e.desconto.id=n,e.isNovoDesconto=!1):(n=e.desconto.id,yield e.descontoService.updateDesconto(e.desconto.id,e.desconto.totalpreco,e.desconto.totaldesconto,e.desconto.datahora,e.desconto.numerorecibo,e.desconto.idpedidodidiglobal,e.desconto.codigodesconto,e.desconto.confirmado,e.desconto.totaldescontorecebido,e.desconto.cancelado,e.desconto.nomeatendente));for(const i of e.descontosCombustiveis)i.iddesconto=n,i.id=e.isNovoDescontoCombustivel?yield e.descontoService.addDescontoCombustivel(i):yield e.descontoService.updateDescontoCombustivel(i);e.isNovoDescontoCombustivel&&(e.isNovoDescontoCombustivel=!1),t&&(e.descontoDataService.clear(),e.resetForm(),yield e.utilService.showAlert("Sucesso","Desconto gerado com sucesso."),e.router.navigate(["/desconto"]))})()}resetForm(){this.desconto={totalpreco:0,totaldesconto:0,datahora:new Date,numerorecibo:"",idpedidodidiglobal:"",codigodesconto:"",confirmado:!1,totaldescontorecebido:0,cancelado:!1,nomeatendente:""},this.descontosCombustiveis=[],this.descontosTiposPagamento=[],this.isNovoDesconto=!0,this.isNovoDescontoCombustivel=!0,this.isNovoDescontoTiposPagamento=!0}voltarPagina(){this.descontoDataService.clear(),this.router.navigate(["/desconto"])}cancelarDesconto(){var t=this;return(0,d.A)(function*(){!(yield t.cancelaDescontoAPI())||!(yield t.gerarDadosRetornoIntegracao())||(t.desconto.cancelado=!0,yield t.saveDesconto(!1),yield t.utilService.showAlert("Sucesso","Desconto cancelado com sucesso."),t.voltarPagina())})()}addDescontosTiposPagamento(){var t=this;return(0,d.A)(function*(){t.descontosTiposPagamento.push({iddesconto:t.desconto.id,tipopagamento:"",valorpago:0})})()}editDescontosTiposPagamento(t){return(0,d.A)(function*(){})()}deleteDescontosTiposPagamento(t){var e=this;return(0,d.A)(function*(){e.descontosTiposPagamento.splice(t,1)})()}sugerirValorTotalAPagarDescontosTiposPagamento(t){var e=this;return(0,d.A)(function*(){t.valorpago=e.desconto.totaldesconto})()}formatValue(t){var e=this;return(0,d.A)(function*(){/^\d+([.,]\d{1,2})?$/.test(null==t?void 0:t.toString())||(yield e.utilService.showAlert("Erro","O campo Pre\xe7o deve conter apenas n\xfameros e ponto, com no m\xe1ximo 2 casas decimais."))})()}desabilitaGerarDesconto(t){var e=this;return(0,d.A)(function*(){const n=document.getElementById("btGerarDesconto");n&&(n.disabled=!!e.desconto.cancelado||!(""!=e.desconto.idpedidodidiglobal&&e.desconto.id>0&&0==e.desconto.confirmado)&&t)})()}desabilitaAdicionarPagamento(t){var e=this;return(0,d.A)(function*(){const n=document.getElementById("btAdicionarPagamento");n&&(n.disabled=!!e.desconto.cancelado||!(""!=e.desconto.idpedidodidiglobal&&e.desconto.id>0&&0==e.desconto.confirmado)&&t)})()}desabilitaValidarDesconto(t){var e=this;return(0,d.A)(function*(){const n=document.getElementById("btValidarDesconto");n&&(n.disabled=!!e.desconto.cancelado||!(""==e.desconto.idpedidodidiglobal&&e.desconto.id<=0)&&(""!=e.desconto.idpedidodidiglobal&&e.desconto.id>0||t))})()}desabilitaCancelarDesconto(t){var e=this;return(0,d.A)(function*(){const n=document.getElementById("btCancelarDesconto");n&&(n.disabled=!!e.desconto.cancelado||!(e.desconto.id>0&&1==e.desconto.confirmado)&&t)})()}desabilitaEditarDeletarProduto(t){var e=this;return(0,d.A)(function*(){e.btDeletarProdutos&&e.btEditarProdutos&&(e.btDeletarProdutos.forEach(n=>{n.disabled=""!=e.desconto.idpedidodidiglobal||t}),e.btEditarProdutos.forEach(n=>{n.disabled=""!=e.desconto.idpedidodidiglobal||t}))})()}desabilitaAdicionarProduto(t){var e=this;return(0,d.A)(function*(){const n=document.getElementById("btAdicionarProduto");n&&(n.disabled=!!e.desconto.cancelado||!(""==e.desconto.idpedidodidiglobal&&e.desconto.id<=0)&&(""!=e.desconto.idpedidodidiglobal&&e.desconto.id>0||t))})()}generateGUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return`${t()}${t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}validaDescontoAPI(){var t=this;return(0,d.A)(function*(){const e=[];for(const i of t.descontosCombustiveis){const s={codigoProduto:i.idcombustivel.toString(),precoUnitario:t.utilService.verificarEConverterPreco(i.preco),quantidade:i.totallitros,totalItem:i.totalprecocombustivel};e.push(s)}const n={nomeAtendente:t.desconto.nomeatendente,codigoDesconto:t.desconto.codigodesconto,valorTotalPedido:t.desconto.totalpreco,listaItensPedido:e};try{const i=yield t.cupomDescontoService.validarDesconto(n);return console.log(`${JSON.stringify(n)}`),console.log(`TraceId ValidarDesconto: ${i.trace_Id}`),console.log(`statusCode: ${i.statusCode}`),200!=i.statusCode?(yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel validar o desconto: ${i.errmsg}`),!1):(t.desconto.idpedidodidiglobal=i.data.orderId,t.desconto.totaldesconto=i.data.totalDiscountedOrderAmount,t.erroMsgApi=i.errmsg,i.data.orderItems.forEach(s=>{t.descontosCombustiveis.forEach(r=>{r.idcombustivel.toString()===s.productCode&&(r.totaldescontocombustivel=r.totalprecocombustivel-s.discountAmount,r.totaldescontorecebidocombustivel=s.discountAmount)})}),!0)}catch(i){console.error("Erro ao validar cupom:",i);let s="Erro desconhecido";return i instanceof g.yz&&(i.error&&"object"==typeof i.error&&"errmsg"in i.error?s=i.error.errmsg:i.message&&(s=i.message)),yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel validar o desconto: ${s}`),!1}})()}ConfirmaDescontoAPI(){var t=this;return(0,d.A)(function*(){const e=[];for(const i of t.descontosTiposPagamento)e.push({tipo:i.tipopagamento,valor:i.valorpago});const n={pedidoId:t.desconto.idpedidodidiglobal,recibo:t.desconto.numerorecibo.toString(),Pagamentos:e};try{const i=yield t.pedidoService.confirmarPedido(n);return console.log(`${JSON.stringify(n)}`),console.log(`TraceID ConfirmaPedido: ${i.trace_Id}`),console.log(`statusCode: ${i.statusCode}`),200==i.statusCode?(t.desconto.confirmado=i.confirmado,!0):(yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel confirmar o desconto: ${i.errmsg}`),!1)}catch(i){console.error("Erro ao confirmar desconto:",i);let s="Erro desconhecido";return i instanceof g.yz&&(i.error&&"object"==typeof i.error&&"errmsg"in i.error?s=i.error.errmsg:i.message&&(s=i.message)),yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel confirmar o desconto: ${s}`),!1}})()}cancelaDescontoAPI(){var t=this;return(0,d.A)(function*(){const e={pedidoId:t.desconto.idpedidodidiglobal,Recibo:t.desconto.numerorecibo.toString()};try{const n=yield t.pedidoService.cancelarPedido(e);return console.log(`${JSON.stringify(e)}`),console.log(`TraceID CancelaDesconto: ${n.trace_Id}`),console.log(`statusCode: ${n.statusCode}`),(n.statusCode=200)?(t.desconto.cancelado=!0,!0):(yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel cancelar o desconto: ${n.errmsg}`),!1)}catch(n){console.error("Erro ao cancelar desconto:",n);let i="Erro desconhecido";return n instanceof g.yz&&(n.error&&"object"==typeof n.error&&"errmsg"in n.error?i=n.error.errmsg:n.message&&(i=n.message)),yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel cancelar o desconto: ${i}`),!1}})()}gerarDadosRetornoIntegracao(){var t=this;return(0,d.A)(function*(){const e=[],n=[];t.SomaTotalDescontoRecebido=0;for(const s of t.descontosTiposPagamento)n.push({id:s.id,idDesconto:s.iddesconto,tipo:s.tipopagamento,valor:s.valorpago});for(const s of t.descontosCombustiveis){const r={id:s.id,idDesconto:s.iddesconto,idCombustivel:s.idcombustivel,idBomba:s.idbomba,idBico:s.idbico,nome:s.nome,preco:s.preco,totalLitros:s.totallitros,totalPrecoCombustivel:s.totalprecocombustivel,totalDescontoCombustivel:s.totaldescontocombustivel,totalDescontoRecebidoCombustivel:s.totaldescontorecebidocombustivel};t.SomaTotalDescontoRecebido+=s.totaldescontorecebidocombustivel,e.push(r)}const i={id:t.desconto.id,descontoPagamento:n,NomeAtendente:t.desconto.nomeatendente,totalPreco:t.desconto.totalpreco,totalDesconto:t.desconto.totaldesconto,dataHora:t.desconto.datahora,recibo:t.desconto.numerorecibo,idPedidoDidiGlobal:t.desconto.idpedidodidiglobal,codigoDesconto:t.desconto.codigodesconto,confirmado:t.desconto.confirmado,totalDescontoRecebido:t.SomaTotalDescontoRecebido,cancelado:t.desconto.cancelado,descontoCombustivel:e};console.log(`${JSON.stringify(i)}`);try{return!!(yield t.gerarDadosRetornoIntegracaoService.gerarDadosRetorno(i)).arquivoGerado||(yield t.utilService.showAlert("Erro","N\xe3o foi poss\xedvel gerar o arquivo de retorno JSON"),!1)}catch(s){console.error("Erro ao gerar retorno:",s);let r="Erro desconhecido";return s instanceof g.yz&&(s.error&&"object"==typeof s.error&&"errmsg"in s.error?r=s.error.errmsg:s.message&&(r=s.message)),yield t.utilService.showAlert("Erro",`N\xe3o foi poss\xedvel gerar o arquivo de retorno JSON: ${r}`),!1}})()}}return(a=m).\u0275fac=function(t){return new(t||a)(o.rXU(h.P),o.rXU(C.n),o.rXU(l.hG),o.rXU(S),o.rXU(A.H),o.rXU(y.N),o.rXU(f.Ix),o.rXU(E.a),o.rXU(T.Q),o.rXU(F.j))},a.\u0275cmp=o.VBU({type:a,selectors:[["app-caddesconto"]],viewQuery:function(t,e){if(1&t&&(o.GBs(I,5),o.GBs(j,5)),2&t){let n;o.mGM(n=o.lsd())&&(e.btDeletarProdutos=n),o.mGM(n=o.lsd())&&(e.btEditarProdutos=n)}},decls:48,vars:18,consts:[["btEditarProduto",""],["btDeletarProduto",""],[3,"translucent"],["slot","start"],["lines","full"],["position","stacked"],["placeholder","Digite o c\xf3digo do desconto","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Digite o recibo",3,"ngModelChange","ngModel"],["placeholder","Digite o nome do atendente",3,"ngModelChange","ngModel"],["readonly","",3,"value"],[4,"ngFor","ngForOf"],["expand","block","id","btAdicionarProduto",3,"click"],["expand","block","color","secondary","id","btValidarDesconto",3,"click"],["expand","block","id","btAdicionarPagamento",3,"click"],["expand","block","id","btGerarDesconto",3,"click"],["expand","block","color","danger","id","btCancelarDesconto",3,"click"],["slot","header"],["slot","end"],[3,"click"],["color","danger",3,"click"],["slot","content"],["required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Digite o valor pago","type","number",3,"ngModelChange","ngModel"],["color","primary",3,"click"],[3,"value"],["color","danger"]],template:function(t,e){1&t&&(o.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",3),o.nrm(3,"ion-menu-button"),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Cadastro de Desconto"),o.k0s()()(),o.j41(6,"ion-content")(7,"ion-item",4)(8,"ion-label",5),o.EFF(9,"C\xf3digo de Desconto"),o.k0s(),o.j41(10,"ion-input",6),o.mxI("ngModelChange",function(i){return o.DH7(e.desconto.codigodesconto,i)||(e.desconto.codigodesconto=i),i}),o.k0s()(),o.j41(11,"ion-item",4)(12,"ion-label",5),o.EFF(13,"Recibo"),o.k0s(),o.j41(14,"ion-input",7),o.mxI("ngModelChange",function(i){return o.DH7(e.desconto.numerorecibo,i)||(e.desconto.numerorecibo=i),i}),o.k0s()(),o.j41(15,"ion-item",4)(16,"ion-label",5),o.EFF(17,"Nome do Atendente"),o.k0s(),o.j41(18,"ion-input",8),o.mxI("ngModelChange",function(i){return o.DH7(e.desconto.nomeatendente,i)||(e.desconto.nomeatendente=i),i}),o.k0s()(),o.j41(19,"ion-item",4)(20,"ion-label",5),o.EFF(21,"Total Pre\xe7o"),o.k0s(),o.nrm(22,"ion-input",9),o.nI1(23,"number"),o.k0s(),o.j41(24,"ion-item",4)(25,"ion-label",5),o.EFF(26,"Total Desconto Recebido"),o.k0s(),o.nrm(27,"ion-input",9),o.nI1(28,"number"),o.k0s(),o.j41(29,"ion-item",4)(30,"ion-label",5),o.EFF(31,"Total com Desconto"),o.k0s(),o.nrm(32,"ion-input",9),o.nI1(33,"number"),o.k0s(),o.j41(34,"ion-accordion-group"),o.DNE(35,$,23,5,"ion-accordion",10),o.k0s(),o.j41(36,"ion-accordion-group"),o.DNE(37,N,28,20,"ion-accordion",10),o.k0s(),o.j41(38,"ion-button",11),o.bIt("click",function(){return e.addDescontosCombustiveis()}),o.EFF(39,"Adicionar Produto"),o.k0s(),o.j41(40,"ion-button",12),o.bIt("click",function(){return e.validarDesconto()}),o.EFF(41,"Validar Desconto"),o.k0s(),o.j41(42,"ion-button",13),o.bIt("click",function(){return e.addDescontosTiposPagamento()}),o.EFF(43,"Adicionar Tipo de Pagamento"),o.k0s(),o.j41(44,"ion-button",14),o.bIt("click",function(){return e.saveDesconto()}),o.EFF(45,"Confirmar Desconto"),o.k0s(),o.j41(46,"ion-button",15),o.bIt("click",function(){return e.cancelarDesconto()}),o.EFF(47,"Cancelar Desconto"),o.k0s()()),2&t&&(o.Y8G("translucent",!0),o.R7$(10),o.R50("ngModel",e.desconto.codigodesconto),o.R7$(4),o.R50("ngModel",e.desconto.numerorecibo),o.R7$(4),o.R50("ngModel",e.desconto.nomeatendente),o.R7$(4),o.Y8G("value",o.i5U(23,9,e.desconto.totalpreco,"1.2-2")),o.R7$(5),o.Y8G("value",o.i5U(28,12,e.desconto.totaldescontorecebido,"1.2-2")),o.R7$(5),o.Y8G("value",o.i5U(33,15,e.desconto.totaldesconto,"1.2-2")),o.R7$(3),o.Y8G("ngForOf",e.descontosTiposPagamento),o.R7$(2),o.Y8G("ngForOf",e.descontosCombustiveis))},dependencies:[b.Sq,v.BC,v.YS,v.vS,l.xk,l.YH,l.Jm,l.QW,l.W9,l.eU,l.$w,l.uz,l.he,l.nf,l.MC,l.Nm,l.Ip,l.BC,l.ai,l.su,l.Je,l.Gw,b.QX]}),m})()}];let M=(()=>{var a;class m{}return(a=m).\u0275fac=function(t){return new(t||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[f.iI.forChild(R),f.iI]}),m})(),G=(()=>{var a;class m{}return(a=m).\u0275fac=function(t){return new(t||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[b.MD,v.YN,l.bv,M]}),m})()}}]);
//# sourceMappingURL=8267.cff447e57cb17315.js.map