"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9772],{9772:(j,b,a)=>{a.r(b),a.d(b,{CaddescontoscombustiveisPageModule:()=>F});var v=a(316),r=a(496),c=a(957),m=a(1379),u=a(9204),o=a(7404),C=a(3857),g=a(7125),h=a(9153),p=a(4747);function _(i,l){if(1&i&&(o.j41(0,"ion-select-option",10),o.EFF(1),o.k0s()),2&i){const d=l.$implicit;o.Y8G("value",d.idbomba),o.R7$(),o.JRh(d.idbomba)}}function f(i,l){if(1&i&&(o.j41(0,"ion-select-option",10),o.EFF(1),o.k0s()),2&i){const d=l.$implicit;o.Y8G("value",d),o.R7$(),o.JRh(d)}}const M=[{path:"",component:(()=>{var i;class l{constructor(s,e,n,t,k,R){this.bombaService=s,this.combustivelService=e,this.descontoDataService=n,this.alertController=t,this.router=k,this.utilService=R,this.bombas=[],this.bicos=[],this.descontosCombustiveis={iddesconto:null,idcombustivel:0,idbomba:0,idbico:0,nome:"",preco:0,totallitros:null,totalprecocombustivel:0,totaldescontocombustivel:0,totaldescontorecebidocombustivel:0},this.index=null}ngOnInit(){this.loadBombas();const s=this.descontoDataService.getCurrentDescontoCombustivel();s&&(this.descontosCombustiveis=s.item,this.index=s.index,this.loadBicos(this.descontosCombustiveis.idbomba),this.loadCombustivel(this.descontosCombustiveis.idbomba,this.descontosCombustiveis.idbico))}loadBombas(){var s=this;return(0,u.A)(function*(){s.bombas=yield s.bombaService.getAllBombas()})()}loadBicos(s){var e=this;return(0,u.A)(function*(){e.bicos=yield e.bombaService.getBicosByBomba(s)})()}loadCombustivel(s,e){var n=this;return(0,u.A)(function*(){const t=yield n.combustivelService.getCombustivelByBombaAndBico(s,e);t&&(n.descontosCombustiveis.idcombustivel=t.id,n.descontosCombustiveis.nome=t.nome,n.descontosCombustiveis.preco=n.utilService.verificarEConverterPreco(t.preco),n.calculateTotals())})()}calculateTotals(){const s=this.utilService.verificarEConverterPreco(this.descontosCombustiveis.preco),e=this.utilService.verificarEConverterPreco(this.descontosCombustiveis.totallitros);this.descontosCombustiveis.totalprecocombustivel=this.utilService.verificarEConverterPreco(s*e),this.descontosCombustiveis.totaldescontocombustivel=0,this.descontosCombustiveis.totaldescontorecebidocombustivel=0}saveProduto(){var s=this;return(0,u.A)(function*(){s.descontosCombustiveis.totallitros<=0?yield s.utilService.showAlert("Erro","O total de litros deve ser maior que zero."):(s.calculateTotals(),null!==s.index?s.descontoDataService.updateDescontoCombustivel(s.index,s.descontosCombustiveis):s.descontoDataService.addDescontoCombustivel(s.descontosCombustiveis),s.router.navigate(["/caddesconto"]))})()}deleteProduto(){var s=this;return(0,u.A)(function*(){null!==s.index&&s.descontoDataService.getDescontosCombustiveis().splice(s.index,1),s.router.navigate(["/caddesconto"])})()}showAlert(s,e){var n=this;return(0,u.A)(function*(){yield(yield n.alertController.create({header:s,message:e,buttons:["OK"]})).present()})()}voltar(){this.router.navigate(["/caddesconto"])}}return(i=l).\u0275fac=function(s){return new(s||i)(o.rXU(C.J),o.rXU(g.j),o.rXU(h.n),o.rXU(c.hG),o.rXU(m.Ix),o.rXU(p.a))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-caddescontoscombustiveis"]],decls:47,vars:11,consts:[[3,"translucent"],["slot","start"],["lines","full"],["position","stacked"],[3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["readonly","",3,"ngModelChange","ngModel"],["type","number","inputmode","numeric",3,"ngModelChange","ionChange","ngModel"],["expand","block",3,"click"],["expand","block","color","danger",3,"click"],[3,"value"]],template:function(s,e){1&s&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-back-button"),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Cadastro de Descontos Combust\xedveis"),o.k0s()()(),o.j41(6,"ion-content")(7,"ion-item",2)(8,"ion-label",3),o.EFF(9,"Bomba"),o.k0s(),o.j41(10,"ion-select",4),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.idbomba,t)||(e.descontosCombustiveis.idbomba=t),t}),o.bIt("ionChange",function(){return e.loadBicos(e.descontosCombustiveis.idbomba)}),o.DNE(11,_,2,2,"ion-select-option",5),o.k0s()(),o.j41(12,"ion-item",2)(13,"ion-label",3),o.EFF(14,"Bico"),o.k0s(),o.j41(15,"ion-select",4),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.idbico,t)||(e.descontosCombustiveis.idbico=t),t}),o.bIt("ionChange",function(){return e.loadCombustivel(e.descontosCombustiveis.idbomba,e.descontosCombustiveis.idbico)}),o.DNE(16,f,2,2,"ion-select-option",5),o.k0s()(),o.j41(17,"ion-item",2)(18,"ion-label",3),o.EFF(19,"Nome"),o.k0s(),o.j41(20,"ion-input",6),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.nome,t)||(e.descontosCombustiveis.nome=t),t}),o.k0s()(),o.j41(21,"ion-item",2)(22,"ion-label",3),o.EFF(23,"Pre\xe7o"),o.k0s(),o.j41(24,"ion-input",6),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.preco,t)||(e.descontosCombustiveis.preco=t),t}),o.k0s()(),o.j41(25,"ion-item",2)(26,"ion-label",3),o.EFF(27,"Total Litros"),o.k0s(),o.j41(28,"ion-input",7),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.totallitros,t)||(e.descontosCombustiveis.totallitros=t),t}),o.bIt("ionChange",function(){return e.calculateTotals()}),o.k0s()(),o.j41(29,"ion-item",2)(30,"ion-label",3),o.EFF(31,"Valor Total"),o.k0s(),o.j41(32,"ion-input",6),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.totalprecocombustivel,t)||(e.descontosCombustiveis.totalprecocombustivel=t),t}),o.k0s()(),o.j41(33,"ion-item",2)(34,"ion-label",3),o.EFF(35,"Valor Desconto Recebido"),o.k0s(),o.j41(36,"ion-input",6),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.totaldescontorecebidocombustivel,t)||(e.descontosCombustiveis.totaldescontorecebidocombustivel=t),t}),o.k0s()(),o.j41(37,"ion-item",2)(38,"ion-label",3),o.EFF(39,"Total com Desconto"),o.k0s(),o.j41(40,"ion-input",6),o.mxI("ngModelChange",function(t){return o.DH7(e.descontosCombustiveis.totaldescontocombustivel,t)||(e.descontosCombustiveis.totaldescontocombustivel=t),t}),o.k0s()(),o.j41(41,"ion-button",8),o.bIt("click",function(){return e.saveProduto()}),o.EFF(42,"Gravar"),o.k0s(),o.j41(43,"ion-button",9),o.bIt("click",function(){return e.deleteProduto()}),o.EFF(44,"Excluir"),o.k0s(),o.j41(45,"ion-button",8),o.bIt("click",function(){return e.voltar()}),o.EFF(46,"Voltar"),o.k0s()()),2&s&&(o.Y8G("translucent",!0),o.R7$(10),o.R50("ngModel",e.descontosCombustiveis.idbomba),o.R7$(),o.Y8G("ngForOf",e.bombas),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.idbico),o.R7$(),o.Y8G("ngForOf",e.bicos),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.nome),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.preco),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.totallitros),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.totalprecocombustivel),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.totaldescontorecebidocombustivel),o.R7$(4),o.R50("ngModel",e.descontosCombustiveis.totaldescontocombustivel))},dependencies:[v.Sq,r.BC,r.vS,c.Jm,c.QW,c.W9,c.eU,c.$w,c.uz,c.he,c.Nm,c.Ip,c.BC,c.ai,c.su,c.Je,c.Gw,c.el]}),l})()}];let P=(()=>{var i;class l{}return(i=l).\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[m.iI.forChild(M),m.iI]}),l})(),F=(()=>{var i;class l{}return(i=l).\u0275fac=function(s){return new(s||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[v.MD,r.YN,c.bv,P]}),l})()}}]);
//# sourceMappingURL=9772.e044d07c5cd8d947.js.map